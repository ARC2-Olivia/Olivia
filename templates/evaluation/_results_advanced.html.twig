{% trans_default_domain 'app' %}

<div class="evaluation-results">
    {% if results is not empty %}
        {% if evaluation.exportType not in [constant('EXPORT_TYPE_NONE', evaluation), constant('EXPORT_TYPE_COOKIE_BANNER', evaluation)] %}
            <div class="text-center mb-3">
                <a href="{{ path('practical_submodule_export_results', {'practicalSubmodule': evaluation.id}) }}" class="btn btn-theme-white bg-green">
                    {{ (evaluation.exportType in [constant('EXPORT_TYPE_PRIVACY_POLICY', evaluation), constant('EXPORT_TYPE_PERSONAL_DATA_PROCESSING_CONSENT', evaluation), constant('EXPORT_TYPE_LIA', evaluation)] ? 'button.exportTemplate' : 'button.export')|trans }}
                </a>
            </div>
        {% endif %}
        {% if evaluation.exportType == constant('EXPORT_TYPE_COOKIE_BANNER', evaluation) and cookieBanner is not empty %}
            {% include 'export/cookieBanner.html.twig' %}
        {% else %}
            {% for result in results %}
                {% if result.textSet %}
                    {% if result.html %}
                        <div class="ql-editor">{{ result.text|raw }}</div>
                    {% else %}
                        <p>{{ result.text|raw|nl2br }}</p>
                    {% endif %}
                {% endif %}
                {% if result.areFilesSet %}
                    <p>
                        {% for file in result.files %}
                            <span class="evaluation-results-file" data-prefix="{{ 'common.file'|trans }}: ">
                            <a href="{{ path('file_fetch_uploaded_file', {'file': file.id}) }}">{{ file.originalName }}</a>
                        </span>
                        {% endfor %}
                    </p>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% else %}
        <p>{{ 'practicalSubmodule.extra.results.empty'|trans }}</p>
    {% endif %}
</div>
<hr>
<div class="evaluation-assessment-data">
    {% for _, answerDatum in answerData %}
        <div class="evaluation-assessment-datum">
            <div class="evaluation-assessment-datum-question">{{ answerDatum.question }}</div>
            {% for answer in answerDatum.answers %}
                <div class="evaluation-assessment-datum-answer">{{ answer|trans|raw|nl2br }}</div>
            {% endfor %}
        </div>
    {% endfor %}
</div>