{% extends 'base.html.twig' %}
{% trans_default_domain 'app' %}

{% block title %}{{ 'page.course.show'|trans }}{% endblock %}

{% block header %}
    <div class="container">
        <div class="row gx-2">
            <div class="col-12 col-md-9 pt-5 pb-3">
                <h1 class="course-header-name">{{ course.name }}</h1>
                <div class="course-header-details">
                    {% if course.estimatedWorkload is not empty %}
                        <div class="course-header-details-item">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z" />
                            </svg>
                            <span>{{ course|translate_workload }}</span>
                        </div>
                    {% endif %}
                    {% if course.lessons is not empty %}
                        <div class="course-header-details-item">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" d="M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z" />
                            </svg>
                            <span>{{ course.lessons|length }} {{ 'course.extra.lessons'|trans }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-12 col-md-3 d-none d-md-block">
                <div class="course-header-image" style="background-image: url('{{ path('file_fetch_course_image', {'course': course.id}) }}')"></div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body %}
    <div class="container">
        <div class="row gx-2">
            <div class="col-12 col-md-9 pt-4">
                <div class="container-fluid">
                    <div class="row">
                        {% include '_partials/toasts.html.twig' with {'classAddition': 'p-0'} %}
                    </div>
                    <div class="row">
                        <ul class="course-navigation">
                            <li><a href="{{ path('course_overview', {'course': course.id}) }}" class="btn btn-nav w-100{% if activeCard == 'overview' %} active{% endif %}">{{ 'course.nav.overview'|trans }}</a></li>
                            <li><a href="{{ path('course_instructors', {'course': course.id}) }}" class="btn btn-nav w-100{% if activeCard == 'instructors' %} active{% endif %}">{{ 'course.nav.instructors'|trans }}</a></li>
                            {% if is_granted('ROLE_MODERATOR') %}
                                <li><a href="{{ path('course_edit', {'course': course.id}) }}" class="btn btn-nav w-100{% if activeCard == 'edit' %} active{% endif %}">{{ 'course.nav.edit'|trans }}</a></li>
                            {% endif %}
                        </ul>
                    </div>
                    <div class="row course-content">
                        {% block courseContent %}{% endblock %}
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <div class="card sharp">
                    {% if is_granted('ROLE_MODERATOR') %}
                        <div class="card-actions">
                            <a href="{{ path('lesson_course', {'course': course.id}) }}" class="btn btn-theme-white bg-orange w-100 py-4">{{ 'course.nav.lessons'|trans }}</a>
                        </div>
                    {% else %}
                        <div class="card-text">
                            <p class="course-free">{{ 'extra.free'|trans }}</p>
                        </div>
                        <div class="card-actions">
                            <a href="#" class="btn btn-theme-white bg-orange w-100 py-4">{{ 'button.startNow'|trans }}</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}